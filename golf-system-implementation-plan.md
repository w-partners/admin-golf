# 골프장 예약 관리 시스템 구현 계획

## 🎯 프로젝트 개요
**목표**: 8개 지역 골프장의 티타임을 중앙 관리하는 예약 중개 플랫폼  
**기간**: 약 8-10주  
**우선순위**: 비즈니스 핵심 기능 → UI/UX → 성능 최적화 → 고급 기능

## 📊 구현 단계별 계획

### Phase 1: 기반 구축 (1-2주)
**목표**: 프로젝트 인프라와 기본 구조 설정

#### 1.1 프로젝트 초기화 & 환경 설정 (2일)
- [x] Next.js 15 + TypeScript 프로젝트 생성
- [ ] ESLint, Prettier 설정
- [ ] shadcn/ui 설치 및 테마 구성
- [ ] 환경 변수 구조 설정 (.env.local, .env.production)
- [ ] Git 저장소 및 브랜치 전략 수립

#### 1.2 데이터베이스 설계 & Prisma 설정 (3일)
- [ ] PostgreSQL 16 (GCP Cloud SQL) 인스턴스 생성
- [ ] Prisma 스키마 작성
  - User 모델 (연락처 기반, 8단계 권한)
  - Team 모델 (팀장-팀원 관계)
  - GolfCourse 모델 (8개 지역, 운영상태)
  - TeeTime 모델 (자동 분류 필드 포함)
  - ConnectedTeeTime 모델 (패키지용)
  - Performance 모델 (실적 추적)
  - SystemConfig 모델 (동적 설정)
  - Notice 모델 (공지사항)
- [ ] 마이그레이션 실행
- [ ] Seed 데이터 작성 (테스트 계정, 샘플 골프장)

#### 1.3 인증 시스템 구축 (3일)
- [ ] NextAuth.js v5 설정
- [ ] Credentials Provider (연락처 + 비밀번호)
- [ ] 세션 관리 및 JWT 설정
- [ ] 권한별 미들웨어 구현
- [ ] 로그인 페이지 UI 구현
- [ ] 권한 검증 HOC/Hook 작성

### Phase 2: 핵심 비즈니스 로직 (2-3주)
**목표**: 티타임 관리의 핵심 기능 구현

#### 2.1 골프장 관리 (2일)
- [ ] 골프장 CRUD API 라우트
- [ ] 골프장 목록 페이지
- [ ] 골프장 등록/수정 폼
- [ ] 지역별 필터링 기능
- [ ] 운영상태 관리 (API연동/수동/대기)

#### 2.2 티타임 등록 시스템 (3일)
- [ ] 티타임 등록 API (자동 분류 로직 포함)
  - 시간대 자동 분류 (1부/2부/3부)
  - 인원 기반 타입 결정 (부킹/조인)
  - 지역 자동 입력
- [ ] 티타임 등록 폼 UI
- [ ] 중복 검증 로직
- [ ] 날짜 제약 검증

#### 2.3 예약 시스템 구현 (4일)
- [ ] 10분 타이머 시스템
  - 프론트엔드 카운트다운 컴포넌트
  - 백엔드 자동 취소 크론잡
  - Redis 세션 관리
- [ ] 예약 상태 전환 로직
  - AVAILABLE → RESERVED → CONFIRMED → COMPLETED
- [ ] 팀장 승인 시스템
- [ ] 예약 알림 시스템 기초

#### 2.4 연결 티타임 (패키지) 기능 (2일)
- [ ] 다중 티타임 연결 API
- [ ] 숙박 정보 관리
- [ ] 개별 취소 처리 로직
- [ ] 패키지 예약 UI

### Phase 3: 핵심 UI 구현 (2주)
**목표**: 매트릭스 뷰와 상세 페이지 완성

#### 3.1 매트릭스 뷰 구현 (5일)
- [ ] 4탭 레이아웃 (데일리부킹/조인, 패키지부킹/조인)
- [ ] 스크롤 테이블 컴포넌트
  - Sticky columns (지역/골프장)
  - 90일 날짜 컬럼
  - 가상화 스크롤 (성능 최적화)
- [ ] 시간대별 수량 표시 셀
- [ ] 클릭 이벤트 핸들링
- [ ] 모바일 반응형 처리

#### 3.2 상세 티타임 목록 (3일)
- [ ] 골프장/날짜별 상세 목록 페이지
- [ ] 티타임 상세 테이블
- [ ] 예약하기 버튼 및 모달
- [ ] 필터 및 정렬 기능
- [ ] 페이지네이션

#### 3.3 글로벌 레이아웃 (2일)
- [ ] 헤더 컴포넌트 (로고, 사용자 정보)
- [ ] 권한별 Quick Menu
- [ ] 모바일 네비게이션
- [ ] 알림 시스템 UI
- [ ] 다크모드 지원 (선택)

### Phase 4: 보조 기능 구현 (1-2주)
**목표**: 운영에 필요한 추가 기능 완성

#### 4.1 실적 관리 시스템 (2일)
- [ ] 완료된 티타임 조회
- [ ] 실적 등록 폼
- [ ] 실적 통계 대시보드
- [ ] 엑셀 다운로드

#### 4.2 회원 관리 (2일)
- [ ] 회원 목록 (권한별 필터)
- [ ] 회원 등록/수정
- [ ] 팀 구조 관리
- [ ] 권한 변경 기능

#### 4.3 공지사항 시스템 (1일)
- [ ] 공지 CRUD
- [ ] 중요 공지 고정
- [ ] 읽음 표시 기능

#### 4.4 대시보드 (2일)
- [ ] 권한별 맞춤 대시보드
- [ ] 오늘의 티타임 요약
- [ ] 예약 현황 차트
- [ ] 빠른 액션 버튼

### Phase 5: 테스트 & 최적화 (1주)
**목표**: 안정성과 성능 확보

#### 5.1 테스트 구현 (3일)
- [ ] Unit 테스트 (비즈니스 로직)
- [ ] Integration 테스트 (API)
- [ ] E2E 테스트 (Playwright)
  - 로그인 플로우
  - 티타임 예약 플로우
  - 권한별 접근 테스트

#### 5.2 성능 최적화 (2일)
- [ ] 데이터베이스 인덱싱
- [ ] API 응답 캐싱 (Redis)
- [ ] 이미지 최적화
- [ ] 번들 사이즈 최적화
- [ ] Core Web Vitals 개선

#### 5.3 보안 강화 (2일)
- [ ] SQL Injection 방지
- [ ] XSS 방지
- [ ] CSRF 토큰
- [ ] Rate Limiting
- [ ] 감사 로그

### Phase 6: 배포 & 운영 준비 (1주)
**목표**: 프로덕션 배포와 운영 체계 구축

#### 6.1 배포 환경 구축 (2일)
- [ ] GCP App Engine 설정
- [ ] Cloudflare 프록시 설정
- [ ] 환경별 설정 분리
- [ ] CI/CD 파이프라인 (GitHub Actions)

#### 6.2 모니터링 설정 (1일)
- [ ] Error tracking (Sentry)
- [ ] Analytics (Google Analytics)
- [ ] 성능 모니터링
- [ ] 로그 수집 시스템

#### 6.3 문서화 (2일)
- [ ] API 문서
- [ ] 사용자 매뉴얼
- [ ] 관리자 가이드
- [ ] 개발자 문서

#### 6.4 운영 준비 (2일)
- [ ] 백업 전략 수립
- [ ] 재해 복구 계획
- [ ] 운영 체크리스트
- [ ] 초기 데이터 마이그레이션

## 🚀 우선순위 매트릭스

### P0 (필수 - Week 1-3)
1. 인증 시스템 (로그인/권한)
2. 데이터베이스 설계
3. 골프장 관리 CRUD
4. 티타임 등록 (자동 분류)
5. 10분 예약 타이머

### P1 (핵심 - Week 4-6)
1. 매트릭스 뷰 (4탭)
2. 상세 티타임 목록
3. 예약 확정 프로세스
4. 팀 승인 시스템
5. 모바일 반응형

### P2 (중요 - Week 7-8)
1. 실적 등록
2. 회원 관리
3. 패키지 티타임
4. 공지사항
5. 대시보드

### P3 (개선 - Week 9-10)
1. 성능 최적화
2. 테스트 커버리지
3. 모니터링
4. 문서화
5. 알림 시스템 고도화

## 📋 기술적 고려사항

### 데이터베이스 최적화
- 매트릭스 뷰를 위한 복합 인덱스
- 티타임 조회 최적화 (날짜 범위)
- 동시성 처리 (예약 충돌 방지)

### 프론트엔드 성능
- React Query로 서버 상태 관리
- 가상화 스크롤 (90일 데이터)
- 이미지 lazy loading
- 코드 스플리팅

### 보안 요구사항
- 연락처 기반 인증 보안
- API Rate Limiting
- 권한 검증 미들웨어
- 민감 정보 암호화

### 확장성 고려
- 마이크로서비스 준비
- 이벤트 기반 아키텍처
- 캐싱 전략
- 수평 확장 가능 구조

## 🎯 마일스톤

### M1: MVP (4주)
- 기본 인증 및 권한
- 골프장/티타임 CRUD
- 간단한 예약 시스템
- 기본 UI

### M2: Beta (6주)
- 매트릭스 뷰 완성
- 10분 타이머 시스템
- 팀 기능
- 모바일 최적화

### M3: Production (8주)
- 전체 기능 완성
- 테스트 커버리지 80%
- 성능 최적화
- 문서화 완료

### M4: Enhancement (10주)
- 고급 기능 추가
- 운영 도구 강화
- 분석 기능
- API 연동 확장

## 🔧 개발 환경 설정

### 필수 도구
```bash
# Node.js 20.x LTS
# PostgreSQL 16
# Redis 7.x
# pnpm (패키지 매니저)
```

### 개발 서버 실행
```bash
# 의존성 설치
pnpm install

# 데이터베이스 마이그레이션
pnpm prisma migrate dev

# 시드 데이터
pnpm prisma db seed

# 개발 서버
pnpm dev
```

### 환경 변수 예시
```env
# Database
DATABASE_URL="postgresql://..."

# NextAuth
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="..."

# Redis
REDIS_URL="redis://..."

# GCP
GCP_PROJECT_ID="..."
```

## 📝 다음 단계 액션

### 즉시 시작 가능한 작업
1. **프로젝트 초기 설정 완료**
   - package.json 생성
   - 필수 패키지 설치
   - 기본 폴더 구조 생성

2. **Prisma 스키마 작성**
   - 모든 엔티티 정의
   - 관계 설정
   - 인덱스 최적화

3. **인증 시스템 구현**
   - NextAuth.js 설정
   - 로그인 페이지
   - 세션 관리

### 주간 체크포인트
- 매주 금요일: 진행상황 리뷰
- 매주 월요일: 주간 계획 수립
- 2주마다: 스프린트 회고

### 리스크 관리
- **기술적 리스크**: 90일 데이터 렌더링 성능
- **비즈니스 리스크**: 10분 타이머 동시성 이슈
- **운영 리스크**: 실시간 예약 충돌 처리
- **보안 리스크**: 연락처 기반 인증 취약점

## 🚦 성공 지표

### 기술적 지표
- 페이지 로드 시간 < 2초
- API 응답 시간 < 200ms  
- 동시 사용자 1000명 지원
- 가용성 99.9%

### 비즈니스 지표
- 예약 전환율 > 70%
- 10분 타이머 완료율 > 85%
- 사용자 만족도 > 4.5/5
- 일일 활성 사용자 > 500명

### 품질 지표
- 테스트 커버리지 > 80%
- 버그 발생률 < 1%
- 코드 품질 점수 > A
- 보안 취약점 0개