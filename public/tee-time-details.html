<!DOCTYPE html>
<html lang="ko">
<!-- ================================================================ -->
<!-- íŒŒì¼: tee-time-details.html (í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´ í˜ì´ì§€) -->
<!-- ì„¤ëª…: ë§¤íŠ¸ë¦­ìŠ¤ ì¹´ìš´íŠ¸ í´ë¦­ì‹œ í‘œì‹œë˜ëŠ” í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ -->
<!-- ê¸°ëŠ¥: ì„ íƒëœ ê³¨í”„ì¥/ë‚ ì§œ/ì‹œê°„ëŒ€ì˜ í‹°íƒ€ì„ ëª©ë¡ì„ í…Œì´ë¸” í˜•íƒœë¡œ í‘œì‹œ -->
<!-- ================================================================ -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¨í”„ì¥ ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ - í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´</title>
    <!-- ============ CSS ìŠ¤íƒ€ì¼ ì„¹ì…˜ ì‹œì‘ ============ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            line-height: 1.6;
        }

        /* ============ í—¤ë” ì˜ì—­ ìŠ¤íƒ€ì¼ ============ */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .header .breadcrumb {
            font-size: 14px;
            opacity: 0.9;
        }

        .header .back-btn {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .header .back-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        /* ============ í•„í„° ì •ë³´ ì˜ì—­ ìŠ¤íƒ€ì¼ ============ */
        .filter-info {
            background: white;
            margin: 20px;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .filter-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
        }

        .filter-item label {
            font-weight: 600;
            color: #495057;
        }

        .filter-item span {
            color: #667eea;
            font-weight: 500;
        }

        /* ============ í…Œì´ë¸” ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ ============ */
        .table-container {
            margin: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .table-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            font-size: 18px;
        }

        /* ============ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ í…Œì´ë¸” ìŠ¤íƒ€ì¼ ============ */
        .tee-time-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .tee-time-table thead {
            background-color: #f8f9fa;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .tee-time-table th {
            padding: 12px 8px;
            text-align: center;
            font-weight: 600;
            color: #495057;
            border-bottom: 2px solid #dee2e6;
            white-space: nowrap;
            font-size: 13px;
        }

        .tee-time-table td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            white-space: nowrap;
        }

        .tee-time-table tbody tr:hover {
            background-color: #f1f3f4;
        }

        /* ============ ìƒíƒœë³„ ìŠ¤íƒ€ì¼ ============ */
        .status-available {
            background-color: #d4edda;
            color: #155724;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 12px;
        }

        .status-reserved {
            background-color: #fff3cd;
            color: #856404;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 12px;
        }

        .status-confirmed {
            background-color: #cce5ff;
            color: #004085;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 12px;
        }

        .status-completed {
            background-color: #d1ecf1;
            color: #0c5460;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 500;
            font-size: 12px;
        }

        /* ============ ê°€ê²© ìŠ¤íƒ€ì¼ ============ */
        .price {
            color: #dc3545;
            font-weight: 600;
        }

        /* ============ ë¡œë”© ë° ì˜¤ë¥˜ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ ============ */
        .loading {
            text-align: center;
            padding: 50px;
            color: #666;
            font-size: 16px;
        }

        .error {
            text-align: center;
            padding: 50px;
            color: #dc3545;
            font-size: 16px;
            background-color: #f8d7da;
            margin: 20px;
            border-radius: 8px;
            border: 1px solid #f1b0b7;
        }

        .no-data {
            text-align: center;
            padding: 50px;
            color: #6c757d;
            font-size: 16px;
        }

        /* ============ ë°˜ì‘í˜• ë””ìì¸ ============ */
        @media (max-width: 768px) {
            .header {
                position: relative;
                padding: 15px 0;
            }
            
            .header .back-btn {
                position: relative;
                left: 0;
                top: 0;
                transform: none;
                margin-bottom: 10px;
            }

            .filter-info {
                margin: 10px;
                padding: 15px;
                flex-direction: column;
                align-items: stretch;
            }

            .filter-item {
                justify-content: space-between;
            }

            .table-container {
                margin: 10px;
                overflow-x: auto;
            }

            .tee-time-table {
                min-width: 800px;
            }

            .tee-time-table th,
            .tee-time-table td {
                padding: 8px 6px;
                font-size: 12px;
            }
        }
    </style>
    <!-- ============ CSS ìŠ¤íƒ€ì¼ ì„¹ì…˜ ë ============ -->
</head>
<body>
    <!-- ============ HTML BODY ì„¹ì…˜ ì‹œì‘ ============ -->
    
    <!-- ============ í—¤ë” ì˜ì—­ ============ -->
    <div class="header">
        <button class="back-btn" onclick="goBack()">â† ëŒì•„ê°€ê¸°</button>
        <h1>ğŸŒï¸ í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´</h1>
        <div class="breadcrumb">ê³¨í”„ì¥ ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ > ë§¤íŠ¸ë¦­ìŠ¤ ë·° > í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´</div>
    </div>

    <!-- ============ í•„í„° ì •ë³´ í‘œì‹œ ì˜ì—­ ============ -->
    <div class="filter-info" id="filterInfo">
        <div class="filter-item">
            <label>ê³¨í”„ì¥:</label>
            <span id="golfCourseName">-</span>
        </div>
        <div class="filter-item">
            <label>ì§€ì—­:</label>
            <span id="regionName">-</span>
        </div>
        <div class="filter-item">
            <label>ë‚ ì§œ:</label>
            <span id="selectedDate">-</span>
        </div>
        <div class="filter-item">
            <label>ì‹œê°„ëŒ€:</label>
            <span id="timePart">-</span>
        </div>
        <div class="filter-item">
            <label>ì´ í‹°íƒ€ì„ ìˆ˜:</label>
            <span id="totalCount">0</span>
        </div>
    </div>

    <!-- ============ í‹°íƒ€ì„ í…Œì´ë¸” ì˜ì—­ ============ -->
    <div class="table-container">
        <div class="table-header">
            ğŸ“‹ í‹°íƒ€ì„ ì„¸ë¶€ ëª©ë¡
        </div>
        
        <!-- ë¡œë”© ë©”ì‹œì§€ -->
        <div class="loading" id="loadingMessage">
            ğŸ”„ í‹°íƒ€ì„ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
        </div>

        <!-- ì˜¤ë¥˜ ë©”ì‹œì§€ -->
        <div class="error" id="errorMessage" style="display: none;">
            âŒ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
        </div>

        <!-- ë°ì´í„° ì—†ìŒ ë©”ì‹œì§€ -->
        <div class="no-data" id="noDataMessage" style="display: none;">
            ğŸ“­ í•´ë‹¹ ì¡°ê±´ì˜ í‹°íƒ€ì„ì´ ì—†ìŠµë‹ˆë‹¤.
        </div>

        <!-- ============ ìŠ¤í”„ë ˆë“œì‹œíŠ¸ í…Œì´ë¸” ============ -->
        <table class="tee-time-table" id="teeTimeTable" style="display: none;">
            <thead>
                <tr>
                    <th>ë²ˆí˜¸</th>
                    <th>í‹°íƒ€ì„</th>
                    <th>ê·¸ë¦°í”¼<br>(ë§Œì›)</th>
                    <th>ì¸ì›<br>(ëª…)</th>
                    <th>ìœ í˜•</th>
                    <th>ì˜ˆì•½ìœ í˜•</th>
                    <th>í™€ì„ íƒ</th>
                    <th>ìºë””</th>
                    <th>ì„ ì…ê¸ˆ</th>
                    <th>ì‹ì‚¬</th>
                    <th>ì¹´íŠ¸ë¹„í¬í•¨</th>
                    <th>ìš”ì²­ì‚¬í•­</th>
                    <th>ë“±ë¡ì¼</th>
                    <th>ìƒíƒœ</th>
                </tr>
            </thead>
            <tbody id="teeTimeTableBody">
                <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë  í‹°íƒ€ì„ ë°ì´í„° -->
            </tbody>
        </table>
    </div>

    <!-- ============ JavaScript ì„¹ì…˜ ì‹œì‘ ============ -->
    <script>
        // ============ ì „ì—­ ë³€ìˆ˜ ============
        let currentFilters = {
            golfCourse: '',
            region: '',
            date: '',
            timePart: ''
        };

        // ============ í˜ì´ì§€ ì´ˆê¸°í™” ============
        window.addEventListener('load', function() {
            // URL íŒŒë¼ë¯¸í„°ì—ì„œ í•„í„° ì •ë³´ ì¶”ì¶œ
            const urlParams = new URLSearchParams(window.location.search);
            
            currentFilters.golfCourse = urlParams.get('golfCourse') || '';
            currentFilters.region = urlParams.get('region') || '';
            currentFilters.date = urlParams.get('date') || '';
            currentFilters.timePart = urlParams.get('timePart') || '';

            // í•„í„° ì •ë³´ í‘œì‹œ
            updateFilterInfo();
            
            // í‹°íƒ€ì„ ë°ì´í„° ë¡œë“œ
            loadTeeTimeDetails();
        });

        // ============ í•„í„° ì •ë³´ ì—…ë°ì´íŠ¸ ============
        function updateFilterInfo() {
            document.getElementById('golfCourseName').textContent = currentFilters.golfCourse || '-';
            document.getElementById('regionName').textContent = currentFilters.region || '-';
            document.getElementById('selectedDate').textContent = formatDate(currentFilters.date) || '-';
            document.getElementById('timePart').textContent = getTimePartName(currentFilters.timePart) || '-';
        }

        // ============ ì‹œê°„ëŒ€ ì´ë¦„ ë³€í™˜ ============
        function getTimePartName(timePart) {
            const timePartNames = {
                '1ë¶€': '1ë¶€ (10ì‹œ ì´ì „)',
                '2ë¶€': '2ë¶€ (10ì‹œ-15ì‹œ)', 
                '3ë¶€': '3ë¶€ (15ì‹œ ì´í›„)'
            };
            return timePartNames[timePart] || timePart;
        }

        // ============ ë‚ ì§œ í¬ë§·íŒ… ============
        function formatDate(dateString) {
            if (!dateString) return '';
            
            const date = new Date(dateString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const weekdays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
            const weekday = weekdays[date.getDay()];
            
            return `${year}-${month}-${day} (${weekday})`;
        }

        // ============ í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´ ë¡œë“œ ============
        async function loadTeeTimeDetails() {
            const loadingMessage = document.getElementById('loadingMessage');
            const errorMessage = document.getElementById('errorMessage');
            const noDataMessage = document.getElementById('noDataMessage');
            const teeTimeTable = document.getElementById('teeTimeTable');
            
            try {
                showLoading(true);
                
                // API í˜¸ì¶œ
                const queryParams = new URLSearchParams({
                    golfCourse: currentFilters.golfCourse,
                    region: currentFilters.region,
                    date: currentFilters.date,
                    timePart: currentFilters.timePart
                });
                
                const response = await fetch(`http://localhost:8081/api/tee-time-details?${queryParams}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                
                showLoading(false);
                
                if (data.length === 0) {
                    showNoData(true);
                } else {
                    renderTeeTimeTable(data);
                    document.getElementById('totalCount').textContent = data.length;
                }
                
            } catch (error) {
                console.error('í‹°íƒ€ì„ ì„¸ë¶€ ì •ë³´ ë¡œë“œ ì˜¤ë¥˜:', error);
                showLoading(false);
                showError(true, error.message);
            }
        }

        // ============ í‹°íƒ€ì„ í…Œì´ë¸” ë Œë”ë§ ============
        function renderTeeTimeTable(teeTimeData) {
            const tableBody = document.getElementById('teeTimeTableBody');
            const teeTimeTable = document.getElementById('teeTimeTable');
            
            tableBody.innerHTML = '';
            
            teeTimeData.forEach((teeTime, index) => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td><strong>${teeTime.í‹°íƒ€ì„}</strong></td>
                    <td class="price">${teeTime.ê·¸ë¦°í”¼}</td>
                    <td>${teeTime.ì¸ì›}</td>
                    <td>${teeTime.ìœ í˜•}</td>
                    <td>${teeTime.ì˜ˆì•½ìœ í˜•}</td>
                    <td>${teeTime.í™€ì„ íƒ}</td>
                    <td>${teeTime.ìºë””}</td>
                    <td>${teeTime.ì„ ì…ê¸ˆ}</td>
                    <td>${teeTime.ì‹ì‚¬}</td>
                    <td>${teeTime.ì¹´íŠ¸ë¹„í¬í•¨}</td>
                    <td>${teeTime.ìš”ì²­ì‚¬í•­ || '-'}</td>
                    <td>${formatDateTime(teeTime.created_at)}</td>
                    <td>${getStatusBadge('AVAILABLE')}</td>
                `;
                
                tableBody.appendChild(row);
            });
            
            teeTimeTable.style.display = 'table';
        }

        // ============ ë‚ ì§œì‹œê°„ í¬ë§·íŒ… ============
        function formatDateTime(dateTimeString) {
            if (!dateTimeString) return '-';
            
            const date = new Date(dateTimeString);
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const hours = String(date.getHours()).padStart(2, '0');
            const minutes = String(date.getMinutes()).padStart(2, '0');
            
            return `${year}-${month}-${day} ${hours}:${minutes}`;
        }

        // ============ ìƒíƒœ ë°°ì§€ ìƒì„± ============
        function getStatusBadge(status) {
            const statusInfo = {
                'AVAILABLE': { class: 'status-available', text: 'ì˜ˆì•½ê°€ëŠ¥' },
                'RESERVED': { class: 'status-reserved', text: 'ì˜ˆì•½ì¤‘' },
                'CONFIRMED': { class: 'status-confirmed', text: 'ì˜ˆì•½í™•ì •' },
                'COMPLETED': { class: 'status-completed', text: 'ì™„ë£Œ' }
            };
            
            const info = statusInfo[status] || { class: 'status-available', text: 'ì˜ˆì•½ê°€ëŠ¥' };
            return `<span class="${info.class}">${info.text}</span>`;
        }

        // ============ UI ìƒíƒœ ê´€ë¦¬ í•¨ìˆ˜ë“¤ ============
        function showLoading(show) {
            document.getElementById('loadingMessage').style.display = show ? 'block' : 'none';
            if (show) {
                document.getElementById('errorMessage').style.display = 'none';
                document.getElementById('noDataMessage').style.display = 'none';
                document.getElementById('teeTimeTable').style.display = 'none';
            }
        }

        function showError(show, message = '') {
            const errorElement = document.getElementById('errorMessage');
            errorElement.style.display = show ? 'block' : 'none';
            if (show && message) {
                errorElement.innerHTML = `âŒ ${message}`;
            }
        }

        function showNoData(show) {
            document.getElementById('noDataMessage').style.display = show ? 'block' : 'none';
            if (show) {
                document.getElementById('teeTimeTable').style.display = 'none';
            }
        }

        // ============ ë’¤ë¡œê°€ê¸° í•¨ìˆ˜ ============
        function goBack() {
            if (window.history.length > 1) {
                window.history.back();
            } else {
                window.location.href = 'index.html';
            }
        }
    </script>
    <!-- ============ JavaScript ì„¹ì…˜ ë ============ -->
</body>
<!-- ============ HTML ë¬¸ì„œ ë ============ -->
</html>