<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¨í”„ì¥ ìˆ˜ì • - ê³¨í”„ì¥ ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            line-height: 1.6;
        }

        /* ê¸€ë¡œë²Œ í—¤ë” */
        .global-header {
            background: linear-gradient(135deg, #2c5f41 0%, #4a8b6b 100%);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .logo-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .company-name {
            font-size: 18px;
            opacity: 0.9;
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logout-btn {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* í€µë©”ë‰´ */
        .quick-menu {
            background: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-bottom: 1px solid #eee;
        }

        .quick-menu-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            gap: 10px;
            padding: 0 20px;
        }

        .menu-item {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            color: #333;
            text-decoration: none;
        }

        .menu-item:hover {
            background: #e9ecef;
            border-color: #ccc;
        }

        .menu-item.active {
            background: #2c5f41;
            color: white;
            border-color: #2c5f41;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ */
        .container {
            max-width: 800px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .page-header {
            background: white;
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .page-title {
            font-size: 24px;
            color: #2c5f41;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #666;
            font-size: 14px;
        }

        /* í¼ ìŠ¤íƒ€ì¼ */
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #2c5f41;
            box-shadow: 0 0 0 2px rgba(44, 95, 65, 0.1);
        }

        .form-row {
            display: flex;
            gap: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .button-group {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #2c5f41;
            color: white;
        }

        .btn-primary:hover {
            background: #1e4330;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #545b62;
        }

        .btn-outline {
            background: transparent;
            color: #6c757d;
            border: 1px solid #6c757d;
        }

        .btn-outline:hover {
            background: #6c757d;
            color: white;
        }

        /* ë¡œë”© ìƒíƒœ */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- ê¸€ë¡œë²Œ í—¤ë” -->
    <header class="global-header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">ğŸŒï¸</div>
                <div class="company-name">ê³¨í”„ì¥ ì˜ˆì•½ ê´€ë¦¬ ì‹œìŠ¤í…œ</div>
            </div>
            <div class="user-section">
                <div class="user-info">
                    <span>ğŸ””</span>
                    <span>ê´€ë¦¬ì</span>
                </div>
                <button class="logout-btn">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </header>

    <!-- í€µë©”ë‰´ -->
    <nav class="quick-menu">
        <div class="quick-menu-content">
            <a href="index.html" class="menu-item">í‹°íƒ€ì„:ëª¨ë‘</a>
            <a href="tee-time-register.html" class="menu-item">í‹°íƒ€ì„ë“±ë¡:ë§¤ë‹ˆì €ì´ìƒ</a>
            <a href="golf-courses.html" class="menu-item active">ê³¨í”„ì¥ë¦¬ìŠ¤íŠ¸/ë“±ë¡:ê´€ë¦¬ìì´ìƒ</a>
            <a href="#" class="menu-item">ì‹¤ì ë“±ë¡:ë§¤ë‹ˆì €ì´ìƒ</a>
            <a href="#" class="menu-item">íšŒì›ê´€ë¦¬:ê´€ë¦¬ìì´ìƒ</a>
        </div>
    </nav>

    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <!-- í˜ì´ì§€ í—¤ë” -->
        <div class="page-header">
            <h1 class="page-title">ê³¨í”„ì¥ ì •ë³´ ìˆ˜ì •</h1>
            <p class="page-subtitle">ê³¨í”„ì¥ì˜ ê¸°ë³¸ ì •ë³´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <!-- ë¡œë”©/ì—ëŸ¬ ë©”ì‹œì§€ -->
        <div id="loading" class="loading">ê³¨í”„ì¥ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        <div id="error" class="error" style="display: none;"></div>
        <div id="success" class="success" style="display: none;"></div>

        <!-- ìˆ˜ì • í¼ -->
        <div id="editForm" class="form-container" style="display: none;">
            <form id="golfCourseForm">
                <input type="hidden" id="courseId" />
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="sequence">ìˆœë²ˆ</label>
                        <input type="number" id="sequence" class="form-input" readonly />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="region">ì§€ì—­ *</label>
                        <select id="region" class="form-select" required>
                            <option value="">ì§€ì—­ ì„ íƒ</option>
                            <option value="ê²½ê¸°ë¶ë¶€">ê²½ê¸°ë¶ë¶€</option>
                            <option value="ê²½ê¸°ë‚¨ë¶€">ê²½ê¸°ë‚¨ë¶€</option>
                            <option value="ê²½ê¸°ë™ë¶€">ê²½ê¸°ë™ë¶€</option>
                            <option value="ê°•ì›">ê°•ì›</option>
                            <option value="ê²½ìƒ">ê²½ìƒ</option>
                            <option value="ì¶©ë‚¨">ì¶©ë‚¨</option>
                            <option value="ì „ë¼">ì „ë¼</option>
                            <option value="ì œì£¼">ì œì£¼</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label" for="name">ê³¨í”„ì¥ëª… *</label>
                    <input type="text" id="name" class="form-input" required placeholder="ê³¨í”„ì¥ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" />
                </div>

                <div class="form-group">
                    <label class="form-label" for="address">ì£¼ì†Œ *</label>
                    <input type="text" id="address" class="form-input" required placeholder="ê³¨í”„ì¥ ì£¼ì†Œë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label" for="contact">ì—°ë½ì²˜ *</label>
                        <input type="tel" id="contact" class="form-input" required placeholder="ì—°ë½ì²˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                    </div>
                    <div class="form-group">
                        <label class="form-label" for="status">ìš´ì˜ìƒíƒœ *</label>
                        <select id="status" class="form-select" required>
                            <option value="">ìƒíƒœ ì„ íƒ</option>
                            <option value="APIì—°ë™">APIì—°ë™</option>
                            <option value="ìˆ˜ë™">ìˆ˜ë™</option>
                            <option value="ëŒ€ê¸°">ëŒ€ê¸°</option>
                        </select>
                    </div>
                </div>

                <div class="button-group">
                    <a href="golf-courses.html" class="btn btn-outline">ì·¨ì†Œ</a>
                    <button type="submit" class="btn btn-primary">ìˆ˜ì • ì™„ë£Œ</button>
                </div>
            </form>
        </div>
    </div>

        <!-- ê³µí†µ í€µë©”ë‰´ ì»´í¬ë„ŒíŠ¸ -->
    <script src="components/quick-menu.js"></script>
    <script>
        let courseId = null;

        // URLì—ì„œ ê³¨í”„ì¥ ID ê°€ì ¸ì˜¤ê¸°
        function getCourseIdFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }

        // ê³¨í”„ì¥ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸°
        async function loadGolfCourse() {
            courseId = getCourseIdFromURL();
            
            if (!courseId) {
                showError('ê³¨í”„ì¥ IDê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                const response = await fetch(`http://localhost:3001/api/golf-courses/${courseId}`);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const course = await response.json();
                populateForm(course);
                
                // ë¡œë”© ìˆ¨ê¸°ê³  í¼ í‘œì‹œ
                document.getElementById('loading').style.display = 'none';
                document.getElementById('editForm').style.display = 'block';
                
            } catch (error) {
                console.error('ê³¨í”„ì¥ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨:', error);
                showError(`ê³¨í”„ì¥ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${error.message}`);
            }
        }

        // í¼ì— ë°ì´í„° ì±„ìš°ê¸°
        function populateForm(course) {
            document.getElementById('courseId').value = course.id;
            document.getElementById('sequence').value = course.sequence;
            document.getElementById('region').value = course.region;
            document.getElementById('name').value = course.name;
            document.getElementById('address').value = course.address;
            document.getElementById('contact').value = course.contact;
            document.getElementById('status').value = course.status;
        }

        // ê³¨í”„ì¥ ì •ë³´ ìˆ˜ì •
        async function updateGolfCourse(formData) {
            try {
                const response = await fetch(`http://localhost:3001/api/golf-courses/${courseId}`, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const result = await response.json();
                
                if (result.success) {
                    showSuccess('ê³¨í”„ì¥ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    
                    // 2ì´ˆ í›„ ëª©ë¡ìœ¼ë¡œ ì´ë™
                    setTimeout(() => {
                        window.location.href = 'golf-courses.html';
                    }, 2000);
                } else {
                    showError('ê³¨í”„ì¥ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
                
            } catch (error) {
                console.error('ê³¨í”„ì¥ ìˆ˜ì • ì‹¤íŒ¨:', error);
                showError(`ê³¨í”„ì¥ ìˆ˜ì •ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ${error.message}`);
            }
        }

        // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
        function showError(message) {
            const errorDiv = document.getElementById('error');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('success').style.display = 'none';
        }

        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
        function showSuccess(message) {
            const successDiv = document.getElementById('success');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            document.getElementById('error').style.display = 'none';
        }

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.addEventListener('DOMContentLoaded', function() {
            // ê³¨í”„ì¥ ì •ë³´ ë¡œë“œ
            loadGolfCourse();

            // í¼ ì œì¶œ ì´ë²¤íŠ¸
            document.getElementById('golfCourseForm').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = {
                    name: document.getElementById('name').value.trim(),
                    region: document.getElementById('region').value,
                    address: document.getElementById('address').value.trim(),
                    contact: document.getElementById('contact').value.trim(),
                    status: document.getElementById('status').value
                };

                // ìœ íš¨ì„± ê²€ì‚¬
                if (!formData.name || !formData.region || !formData.address || !formData.contact || !formData.status) {
                    showError('ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                await updateGolfCourse(formData);
            });
        });
    </script>
</body>
</html>