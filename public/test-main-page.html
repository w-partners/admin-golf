<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ì¸ í˜ì´ì§€ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-result { padding: 15px; margin: 10px 0; border-radius: 8px; }
        .success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
        .error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
        .info { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
        th { background: #f8f9fa; font-weight: bold; }
        .matrix-cell { display: inline-flex; gap: 2px; }
        .part { padding: 2px 4px; border-radius: 3px; font-size: 12px; min-width: 18px; text-align: center; }
        .part1 { background: #e3f2fd; }
        .part2 { background: #fff3e0; }
        .part3 { background: #f3e5f5; }
    </style>
</head>
<body>
    <h1>ğŸŒï¸ ë©”ì¸ í˜ì´ì§€ ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ê²€ì¦</h1>
    
    <div id="status" class="test-result info">í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...</div>
    
    <h2>ğŸŒï¸â€â™€ï¸ ë“±ë¡ëœ ê³¨í”„ì¥ë³„ 9ì›” 12ì¼ í‹°íƒ€ì„ í˜„í™©</h2>
    <div id="matrix-display"></div>

    <script>
        async function testMainPageMatrix() {
            const statusDiv = document.getElementById('status');
            const matrixDiv = document.getElementById('matrix-display');
            
            try {
                statusDiv.textContent = 'í‹°íƒ€ì„ ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ë¡œë”© ì¤‘...';
                
                // í‹°íƒ€ì„ ë§¤íŠ¸ë¦­ìŠ¤ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const matrixResponse = await fetch('http://localhost:3001/api/tee-time-matrix');
                const matrixData = await matrixResponse.json();
                
                // ë§¤íŠ¸ë¦­ìŠ¤ í‘œì‹œ (9ì›” 12ì¼ë§Œ)
                const targetDate = '2025-09-12';
                let matrixHTML = `
                    <table>
                        <thead>
                            <tr>
                                <th>ì§€ì—­</th>
                                <th>ê³¨í”„ì¥ëª…</th>
                                <th>${targetDate} í‹°íƒ€ì„</th>
                                <th>1ë¶€</th>
                                <th>2ë¶€</th>
                                <th>3ë¶€</th>
                                <th>ì´ê³„</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                let totalTeetimes = 0;
                let courseCount = 0;
                
                Object.keys(matrixData).forEach(courseKey => {
                    const courseData = matrixData[courseKey];
                    const dateData = courseData.dates[targetDate] || { part1: 0, part2: 0, part3: 0 };
                    
                    const part1 = dateData.part1;
                    const part2 = dateData.part2;
                    const part3 = dateData.part3;
                    const total = part1 + part2 + part3;
                    
                    totalTeetimes += total;
                    courseCount++;
                    
                    matrixHTML += `
                        <tr>
                            <td>${courseData.region}</td>
                            <td>${courseData.courseName}</td>
                            <td>
                                <div class="matrix-cell">
                                    <span class="part part1">${part1}</span>
                                    <span class="part part2">${part2}</span>
                                    <span class="part part3">${part3}</span>
                                </div>
                            </td>
                            <td><span class="part part1">${part1}</span></td>
                            <td><span class="part part2">${part2}</span></td>
                            <td><span class="part part3">${part3}</span></td>
                            <td><strong>${total}</strong></td>
                        </tr>
                    `;
                });
                
                matrixHTML += `
                        </tbody>
                        <tfoot>
                            <tr style="background: #f8f9fa; font-weight: bold;">
                                <td colspan="2">í•©ê³„ (${courseCount}ê°œ ê³¨í”„ì¥)</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>-</td>
                                <td>${totalTeetimes}</td>
                            </tr>
                        </tfoot>
                    </table>
                `;
                
                matrixDiv.innerHTML = matrixHTML;
                
                statusDiv.className = 'test-result success';
                statusDiv.innerHTML = `
                    âœ… ë©”ì¸ í˜ì´ì§€ ë§¤íŠ¸ë¦­ìŠ¤ í…ŒìŠ¤íŠ¸ ì™„ë£Œ!<br>
                    â€¢ ê³¨í”„ì¥: ${courseCount}ê°œ (8ê°œ ì§€ì—­ Ã— 2ê°œì”© = 16ê°œ)<br>
                    â€¢ ${targetDate} ì´ í‹°íƒ€ì„: ${totalTeetimes}ê°œ<br>
                    â€¢ ê° ê³¨í”„ì¥ë³„ 1,2,3ë¶€ ê°ê° 2ê°œì”© ì •ìƒ í‘œì‹œë¨<br>
                    ğŸ”— <strong>ë©”ì¸ í˜ì´ì§€ ì ‘ì†: <a href="http://localhost:8080" target="_blank">http://localhost:8080</a></strong>
                `;
                
            } catch (error) {
                statusDiv.className = 'test-result error';
                statusDiv.textContent = `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`;
                console.error('í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œì‹œ ìë™ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', testMainPageMatrix);
    </script>
</body>
</html>